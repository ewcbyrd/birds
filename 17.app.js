(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{42:function(s,e,t){"use strict";t.r(e);var a=t(0),i=[];var l=[function(s,e,t){return["table",e,"{table-layout:fixed;width:100%}"].join("")}];function n(s,e,t,i){const{h:l,d:n,t:d,k:c,b:r,i:o}=s,{_m0:h}=i;return[e.sightings?l("div",{classMap:{"slds-size_1-of-1":!0},key:0},[l("div",{classMap:{"slds-card":!0},key:1},[l("div",{classMap:{"slds-card__header":!0},key:2},[l("div",{classMap:{"slds-media":!0,"slds-media--center":!0,"slds-has-flexi-truncate":!0},key:3},[l("span",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},attrs:{title:"Description of icon when needed"},key:4},[l("svg",{classMap:{"slds-icon":!0},attrs:{"aria-hidden":"true"},key:5},[l("use",{attrs:{"xlink:href":Object(a.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:6},[])])]),l("div",{classMap:{"slds-media__body":!0},key:7},[l("h2",{classMap:{"slds-p-left_small":!0,"slds-text-heading--small":!0,"slds-wrap":!0},key:8},[n(e.header)])])])]),l("div",{classMap:{"slds-card__body":!0},key:9},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:10},[l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:11},[l("thead",{key:12},[l("tr",{classMap:{"slds-text-heading--label":!0},key:13},[l("th",{attrs:{scope:"col"},key:14},[l("span",{classMap:{"slds-truncate":!0},key:15},[d("Species")])]),l("th",{attrs:{scope:"col"},key:16},[l("span",{classMap:{"slds-truncate":!0},key:17},[d("Location")])])])]),l("tbody",{key:18},o(e.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:c(19,s.id),on:{click:h||(i._m0=r(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:20},[n(s.name)]),l("td",{classMap:{"slds-cell-wrap":!0},key:21},[n(s.locations)])])})))])])])])]):null]}var d=Object(a.registerTemplate)(n);n.stylesheets=[],l&&n.stylesheets.push.apply(n.stylesheets,l),n.stylesheetTokens={hostAttribute:"my-my-sightings_sightings-host",shadowAttribute:"my-my-sightings_sightings"};class c extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.header=void 0}get sightingList(){let s=[];return new Set(this.sightings.map(s=>s.comName)).forEach(e=>{let t=this.sightings.filter(s=>s.comName===e),a=new Set(t.map(s=>s.subnational2Name));s.push({id:t[0].speciesCode,name:e,locations:Array.from(a).join(", ")})}),s.sort((s,e)=>s.name>e.name?1:-1)}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.filter(s=>s.speciesCode===e);this.dispatchEvent(new CustomEvent("sightingselected",{detail:t}))}}Object(a.registerDecorators)(c,{publicProps:{sightings:{config:0},header:{config:0}}});var r=Object(a.registerComponent)(c,{tmpl:d});var o=[function(s,e,t){return[".slds-card__footer",e,"{height:250px}"].join("")}];function h(s,e,t,a){const{d:i,h:l,t:n,k:d,b:c,i:r}=s,{_m0:o}=a;return[e.showSightings?l("article",{classMap:{"slds-card":!0},key:0},[l("div",{classMap:{"slds-card__header":!0,"slds-grid":!0},key:1},[l("header",{classMap:{"slds-media":!0,"slds-media_center":!0,"slds-has-flexi-truncate":!0},key:2},[l("div",{classMap:{"slds-media__body":!0},key:3},[l("h2",{classMap:{"slds-card__header-title":!0},key:4},[l("a",{classMap:{"slds-card__header-link":!0,"slds-truncate":!0},attrs:{href:"#",title:"Accounts"},key:5},[l("span",{key:6},[i(e.header)])])])])])]),l("div",{classMap:{"slds-card__body":!0,"slds-card__body_inner":!0},key:7},[l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:8},[l("thead",{key:9},[l("tr",{classMap:{"slds-text-heading--label":!0},key:10},[l("th",{attrs:{scope:"col"},key:11},[l("span",{classMap:{"slds-truncate":!0},key:12},[n("Date/Time")])]),l("th",{styleMap:{width:"20rem"},attrs:{scope:"col"},key:13},[l("span",{classMap:{"slds-truncate":!0},key:14},[n("Site Name")])]),l("th",{attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[n("Location")])]),l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[n("Sighted By")])]),l("th",{attrs:{scope:"col"},key:19},[l("span",{classMap:{"slds-truncate":!0},key:20},[n("Quanitity")])])])]),l("tbody",{key:21},r(e.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:d(22,s.id),on:{click:o||(a._m0=c(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:23},[i(s.date)]),l("td",{classMap:{"slds-cell-wrap":!0},key:24},[i(s.location)]),l("td",{classMap:{"slds-cell-wrap":!0},key:25},[i(s.locality)]),l("td",{classMap:{"slds-cell-wrap":!0},key:26},[i(s.by)]),l("td",{classMap:{"slds-cell-wrap":!0},key:27},[i(s.quantity)])])})))])]),l("footer",{classMap:{"slds-card__footer":!0},key:28},[e.showMap?l("iframe",{styleMap:{border:"0"},attrs:{width:"100%",height:"100%",frameborder:"0",src:e.mapUrl,allowfullscreen:""},key:29},[]):null])]):null]}var g=Object(a.registerTemplate)(h);h.stylesheets=[],o&&h.stylesheets.push.apply(h.stylesheets,o),h.stylesheetTokens={hostAttribute:"my-my-sightingsDetails_sightingsDetails-host",shadowAttribute:"my-my-sightingsDetails_sightingsDetails"};class p extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.lat=void 0,this.lon=void 0}get showSightings(){return void 0!==this.sightings&&this.sightings.length>0}get header(){return`${this.sightings[0].comName} (${this.sightings[0].sciName})`}get sightingList(){let s=[];return this.sightings.forEach(e=>{s.findIndex(s=>s.id===e.obsId)<0&&s.push({id:e.obsId,location:e.locName,locality:`${e.subnational2Name}, ${e.subnational1Name}`,quantity:e.howMany,by:e.userDisplayName,date:e.obsDt})}),s}get mapUrl(){return`https://www.google.com/maps/embed/v1/place?key=AIzaSyCB3Q5szLx_1-UE-WIkFSgA3fFi7-KWFAM&q=${this.lat},${this.lon}&zoom=15`}get showMap(){return this.lat&&this.lon}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.find(s=>s.obsId===e);this.lat=t.lat,this.lon=t.lng}}Object(a.registerDecorators)(p,{publicProps:{sightings:{config:0},lat:{config:0},lon:{config:0}}});var y=Object(a.registerComponent)(p,{tmpl:g});function u(s,e,t,a){const{gid:i,b:l,h:n,t:d,c:c}=s,{_m0:o,_m1:h,_m2:g,_m3:p,_m4:u}=a;return[n("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-gutters":!0,"slds-p-left_medium":!0,"slds-p-right_medium":!0,main:!0,"slds-p-bottom_xx-large":!0,"slds-p-top_medium":!0},key:0},[n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0,"slds-text-align_center":!0,"slds-p-bottom_small":!0},key:1},[n("fieldset",{classMap:{"slds-form-element":!0},key:2},[n("div",{classMap:{"slds-form-element__control":!0},key:3},[n("div",{classMap:{"slds-radio_button-group":!0},key:4},[n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:5},[n("input",{classMap:{nearby:!0},attrs:{type:"radio",name:"sightings",id:i("nearby"),disabled:""},props:{value:"nearby",checked:e.nearbySelected},key:6,on:{change:o||(a._m0=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("nearby")},key:7},[n("span",{classMap:{"slds-radio_faux":!0},key:8},[d("Nearby")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:9},[n("input",{classMap:{local:!0},attrs:{type:"radio",name:"sightings",id:i("local")},props:{value:"local",checked:e.localSelected},key:10,on:{change:h||(a._m1=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("local")},key:11},[n("span",{classMap:{"slds-radio_faux":!0},key:12},[d("Local")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:13},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"sightings",id:i("state")},props:{value:"state",checked:e.stateSelected},key:14,on:{change:g||(a._m2=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("state")},key:15},[n("span",{classMap:{"slds-radio_faux":!0},key:16},[d("State")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:17},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"custom",id:i("custom"),disabled:""},props:{value:"cutom",checked:e.customSelected},key:18,on:{change:p||(a._m3=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("custom")},key:19},[n("span",{classMap:{"slds-radio_faux":!0},key:20},[d("Custom")])])])])])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:21},[]),n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0},key:22},[n("div",{key:23},[]),n("div",{key:24},[c("my-sightings",r,{props:{sightings:e.sightings,header:e.sightingsHeader},key:25,on:{sightingselected:u||(a._m4=l(e.handleSightingsSelected))}},[])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:26},[c("my-sightings-details",y,{props:{sightings:e.selectedSightings},key:27},[])])])]}var m=Object(a.registerTemplate)(u);u.stylesheets=[],i&&u.stylesheets.push.apply(u.stylesheets,i),u.stylesheetTokens={hostAttribute:"my-my-resources_resources-host",shadowAttribute:"my-my-resources_resources"};var k=t(1);class b extends a.LightningElement{constructor(...s){super(...s),this.localSightings=void 0,this.localSightingsDaysBack=3,this.stateSightings=void 0,this.vaSightingsDaysBack=1,this.selectedSightings=[],this.nearbySelected=!1,this.localSelected=!0,this.stateSelected=!1,this.customSelected=!1,this.view="local"}connectedCallback(){this.getLocalSightings(),this.getVirginiaNotableSightings()}get localSightingsHeader(){return`Notable Fredericksburg Region Sightings for the past ${this.localSightingsDaysBack} days`}getLocalSightings(){const s={lat:38.31,long:-77.46,daysBack:this.localSightingsDaysBack};Object(k.c)(s).then(s=>{this.localSightings=s})}getVirginiaNotableSightings(){const s={regionCode:"US-VA",daysBack:this.vaSightingsDaysBack};Object(k.d)(s).then(s=>{this.stateSightings=s})}get stateSightingsHeader(){return"Notable Virginia Sightings for the past day"}handleSightingsSelected(s){this.selectedSightings=s.detail;const e=this.template.querySelector("my-sightings-details");e.lat=void 0,e.lon=void 0}handleSightingsChange(s){this.view=s.target.value,this.selectedSightings=void 0,["nearby","local","state"].forEach(s=>{this[s+"Selected"]=!1}),this[this.view+"Selected"]=s.target.checked}get sightings(){return this[this.view+"Sightings"]}get sightingsHeader(){return this[this.view+"SightingsHeader"]}}Object(a.registerDecorators)(b,{fields:["localSightings","localSightingsDaysBack","stateSightings","vaSightingsDaysBack","selectedSightings","nearbySelected","localSelected","stateSelected","customSelected","view"]});e.default=Object(a.registerComponent)(b,{tmpl:m})}}]);