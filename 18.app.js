(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{42:function(s,e,t){"use strict";t.r(e);var a=t(0),i=[];var l=[function(s,e,t){return["table",e,"{table-layout:fixed;width:100%}"].join("")}],n=t(10);function o(s,e,t,i){const{h:l,d:o,c:d,t:c,k:r,b:h,i:g}=s,{_m0:p,_m1:y}=i;return[e.sightings?l("div",{classMap:{"slds-size_1-of-1":!0},key:0},[l("div",{classMap:{"slds-card":!0},key:1},[l("div",{classMap:{"slds-card__header":!0},key:2},[l("div",{classMap:{"slds-media":!0,"slds-media--center":!0,"slds-has-flexi-truncate":!0},key:3},[l("span",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},attrs:{title:"Description of icon when needed"},key:4},[l("svg",{classMap:{"slds-icon":!0},attrs:{"aria-hidden":"true"},key:5},[l("use",{attrs:{"xlink:href":Object(a.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:6},[])])]),l("div",{classMap:{"slds-media__body":!0},key:7},[l("h2",{classMap:{"slds-p-left_small":!0,"slds-text-heading--small":!0,"slds-wrap":!0},key:8},[o(e.header),d("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a species to see a list of sightings for that species."},key:9},[])])])])]),l("div",{classMap:{"slds-card__body":!0},key:10},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:11},[e.showLocations?l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:12},[l("thead",{key:13},[l("tr",{classMap:{"slds-text-heading--label":!0},key:14},[l("th",{attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[c("Species")])]),l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[c("Location")])])])]),l("tbody",{key:19},g(e.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:r(20,s.id),on:{click:p||(i._m0=h(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:21},[o(s.name)]),l("td",{classMap:{"slds-cell-wrap":!0},key:22},[o(s.locations)])])})))]):null,e.showLocations?null:l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:23},[l("thead",{key:24},[l("tr",{classMap:{"slds-text-heading--label":!0},key:25},[l("th",{attrs:{scope:"col"},key:26},[l("span",{classMap:{"slds-truncate":!0},key:27},[c("Species")])]),l("th",{attrs:{scope:"col"},key:28},[l("span",{classMap:{"slds-truncate":!0},key:29},[c("Scientific Name")])])])]),l("tbody",{key:30},g(e.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:r(31,s.id),on:{click:y||(i._m1=h(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:32},[o(s.name)]),l("td",{classMap:{"slds-cell-wrap":!0},key:33},[l("i",{key:34},[o(s.scientific)])])])})))])])])])]):null]}var d=Object(a.registerTemplate)(o);o.stylesheets=[],l&&o.stylesheets.push.apply(o.stylesheets,l),o.stylesheetTokens={hostAttribute:"my-my-sightings_sightings-host",shadowAttribute:"my-my-sightings_sightings"};class c extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.header=void 0,this.viewtype=void 0}get sightingList(){if(0===this.sightings.length)return[{id:"0",name:"None"}];let s=[];return new Set(this.sightings.map(s=>s.comName)).forEach(e=>{let t=this.sightings.filter(s=>s.comName===e),a=new Set(t.map(s=>s.subnational2Name));s.push({id:t[0].speciesCode,name:e,locations:Array.from(a).join(", "),mostRecent:Math.max(...t.map(s=>new Date(s.obsDt))),scientific:t[0].sciName})}),s.sort((s,e)=>s.name>e.name?1:-1)}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.filter(s=>s.speciesCode===e);this.dispatchEvent(new CustomEvent("sightingselected",{detail:t}))}get showLocations(){return"nearby"!==this.viewtype}}Object(a.registerDecorators)(c,{publicProps:{sightings:{config:0},header:{config:0},viewtype:{config:0}}});var r=Object(a.registerComponent)(c,{tmpl:d});var h=[function(s,e,t){return[".slds-card__footer",e,"{height:250px}"].join("")}];function g(s,e,t,a){const{d:i,h:l,c:o,t:d,k:c,b:r,i:h}=s,{_m0:g}=a;return[e.showSightings?l("article",{classMap:{"slds-card":!0},key:0},[l("div",{classMap:{"slds-card__header":!0,"slds-grid":!0},key:1},[l("header",{classMap:{"slds-media":!0,"slds-media_center":!0,"slds-has-flexi-truncate":!0},key:2},[l("div",{classMap:{"slds-media__body":!0},key:3},[l("h2",{classMap:{"slds-card__header-title":!0},key:4},[l("a",{classMap:{"slds-card__header-link":!0,"slds-truncate":!0},attrs:{href:"#",title:"Accounts"},key:5},[l("span",{key:6},[i(e.header)])]),o("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a sighting to see a map for the siting."},key:7},[])])])])]),l("div",{classMap:{"slds-card__body":!0,"slds-card__body_inner":!0},key:8},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:9},[l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:10},[l("thead",{key:11},[l("tr",{classMap:{"slds-text-heading--label":!0},key:12},[l("th",{attrs:{scope:"col"},key:13},[l("span",{classMap:{"slds-truncate":!0},key:14},[d("Date/Time")])]),l("th",{styleMap:{width:"20rem"},attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[d("Site Name")])]),e.showLocations?l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[d("Location")])]):null,e.showLocations?l("th",{attrs:{scope:"col"},key:19},[l("span",{classMap:{"slds-truncate":!0},key:20},[d("Sighted By")])]):null,l("th",{attrs:{scope:"col"},key:21},[l("span",{classMap:{"slds-truncate":!0},key:22},[d("Quanitity")])])])]),l("tbody",{key:23},h(e.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:c(24,s.id),on:{click:g||(a._m0=r(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:25},[i(s.date)]),l("td",{classMap:{"slds-cell-wrap":!0},key:26},[i(s.location)]),e.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:27},[i(s.locality)]):null,e.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:28},[i(s.by)]):null,l("td",{classMap:{"slds-cell-wrap":!0},key:29},[i(s.quantity)])])})))])])]),l("footer",{classMap:{"slds-card__footer":!0},key:30},[e.showMap?l("iframe",{styleMap:{border:"0"},attrs:{width:"100%",height:"100%",frameborder:"0",src:e.mapUrl,allowfullscreen:""},key:31},[]):null])]):null]}var p=Object(a.registerTemplate)(g);g.stylesheets=[],h&&g.stylesheets.push.apply(g.stylesheets,h),g.stylesheetTokens={hostAttribute:"my-my-sightingsDetails_sightingsDetails-host",shadowAttribute:"my-my-sightingsDetails_sightingsDetails"};class y extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.lat=void 0,this.lon=void 0,this.viewtype=void 0}get showSightings(){return void 0!==this.sightings&&this.sightings.length>0}get header(){return`${this.sightings[0].comName} (${this.sightings[0].sciName})`}get sightingList(){let s=[];return this.sightings.forEach(e=>{s.findIndex(s=>s.id===e.obsId)<0&&s.push({id:e.obsId,location:e.locName,locality:void 0===e.subnational2Name?"":`${e.subnational2Name}, ${e.subnational1Name}`,quantity:e.howMany,by:e.userDisplayName,date:e.obsDt})}),s}get mapUrl(){return`https://www.google.com/maps/embed/v1/place?key=AIzaSyCB3Q5szLx_1-UE-WIkFSgA3fFi7-KWFAM&q=${this.lat},${this.lon}&zoom=15`}get showMap(){return this.lat&&this.lon}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.find(s=>s.obsId===e);this.lat=t.lat,this.lon=t.lng}get showLocations(){return"nearby"!==this.viewtype}}Object(a.registerDecorators)(y,{publicProps:{sightings:{config:0},lat:{config:0},lon:{config:0},viewtype:{config:0}}});var u=Object(a.registerComponent)(y,{tmpl:p});function b(s,e,t,a){const{gid:i,b:l,h:n,t:o,c:d}=s,{_m0:c,_m1:h,_m2:g,_m3:p,_m4:y}=a;return[n("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-gutters":!0,"slds-p-left_medium":!0,"slds-p-right_medium":!0,main:!0,"slds-p-bottom_xx-large":!0,"slds-p-top_medium":!0},key:0},[n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0,"slds-text-align_center":!0,"slds-p-bottom_small":!0},key:1},[n("fieldset",{classMap:{"slds-form-element":!0},key:2},[n("div",{classMap:{"slds-form-element__control":!0},key:3},[n("div",{classMap:{"slds-radio_button-group":!0},key:4},[n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:5},[n("input",{classMap:{nearby:!0},attrs:{type:"radio",name:"sightings",id:i("nearby"),disabled:e.nearbyDisabled?"":null},props:{value:"nearby",checked:e.nearbySelected},key:6,on:{change:c||(a._m0=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("nearby")},key:7},[n("span",{classMap:{"slds-radio_faux":!0},key:8},[o("Nearby")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:9},[n("input",{classMap:{local:!0},attrs:{type:"radio",name:"sightings",id:i("local")},props:{value:"local",checked:e.localSelected},key:10,on:{change:h||(a._m1=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("local")},key:11},[n("span",{classMap:{"slds-radio_faux":!0},key:12},[o("Local")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:13},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"sightings",id:i("state")},props:{value:"state",checked:e.stateSelected},key:14,on:{change:g||(a._m2=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("state")},key:15},[n("span",{classMap:{"slds-radio_faux":!0},key:16},[o("State")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:17},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"custom",id:i("custom"),disabled:""},props:{value:"cutom",checked:e.customSelected},key:18,on:{change:p||(a._m3=l(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("custom")},key:19},[n("span",{classMap:{"slds-radio_faux":!0},key:20},[o("Custom")])])])])])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:21},[]),n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0},key:22},[n("div",{key:23},[]),n("div",{key:24},[d("my-sightings",r,{props:{sightings:e.sightings,header:e.sightingsHeader,viewtype:e.view},key:25,on:{sightingselected:y||(a._m4=l(e.handleSightingsSelected))}},[])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:26},[d("my-sightings-details",u,{props:{sightings:e.selectedSightings,viewtype:e.view},key:27},[])])])]}var k=Object(a.registerTemplate)(b);b.stylesheets=[],i&&b.stylesheets.push.apply(b.stylesheets,i),b.stylesheetTokens={hostAttribute:"my-my-resources_resources-host",shadowAttribute:"my-my-resources_resources"};var m=t(1);class _ extends a.LightningElement{constructor(...s){super(...s),this.localSightings=void 0,this.localSightingsDaysBack=3,this.stateSightings=void 0,this.nearbySightings=void 0,this.vaSightingsDaysBack=1,this.selectedSightings=[],this.nearbySelected=!1,this.localSelected=!0,this.stateSelected=!1,this.customSelected=!1,this.view="local"}connectedCallback(){this.getLocalSightings(),this.getVirginiaNotableSightings(),navigator.geolocation&&this.getNearbyObservations()}get localSightingsHeader(){return`Notable Fredericksburg Region Sightings for the past ${this.localSightingsDaysBack} days`}getLocalSightings(){const s={lat:38.31,long:-77.46,daysBack:this.localSightingsDaysBack};Object(m.c)(s).then(s=>{this.localSightings=s})}getVirginiaNotableSightings(){const s={regionCode:"US-VA",daysBack:this.vaSightingsDaysBack};Object(m.e)(s).then(s=>{this.stateSightings=s})}getNearbyObservations(){navigator.geolocation.getCurrentPosition(s=>{const e={lat:s.coords.latitude,long:s.coords.longitude};Object(m.d)(e).then(s=>{this.nearbySightings=s})})}get stateSightingsHeader(){return"Notable Virginia Sightings for the past day"}get nearbySightingsHeader(){return"Nearby Sightings for the past 7 days"}handleSightingsSelected(s){this.selectedSightings=s.detail;const e=this.template.querySelector("my-sightings-details");e.lat=void 0,e.lon=void 0}handleSightingsChange(s){this.view=s.target.value,this.selectedSightings=void 0,["nearby","local","state"].forEach(s=>{this[s+"Selected"]=!1}),this[this.view+"Selected"]=s.target.checked}get sightings(){return this[this.view+"Sightings"]}get sightingsHeader(){return this[this.view+"SightingsHeader"]}get nearbyDisabled(){return!navigator.geolocation}}Object(a.registerDecorators)(_,{fields:["localSightings","localSightingsDaysBack","stateSightings","nearbySightings","vaSightingsDaysBack","selectedSightings","nearbySelected","localSelected","stateSelected","customSelected","view"]});e.default=Object(a.registerComponent)(_,{tmpl:k})}}]);