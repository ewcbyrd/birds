(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{42:function(s,e,t){"use strict";t.r(e);var a=t(0),l=[];var i=[function(s,e,t){return["table",e,"{table-layout:fixed;width:100%}"].join("")}],n=t(10);function d(s,e,t,l){const{h:i,d:d,c:c,t:r,k:o,b:h,i:g}=s,{_m0:p}=l;return[e.sightings?i("div",{classMap:{"slds-size_1-of-1":!0},key:0},[i("div",{classMap:{"slds-card":!0},key:1},[i("div",{classMap:{"slds-card__header":!0},key:2},[i("div",{classMap:{"slds-media":!0,"slds-media--center":!0,"slds-has-flexi-truncate":!0},key:3},[i("span",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},attrs:{title:"Description of icon when needed"},key:4},[i("svg",{classMap:{"slds-icon":!0},attrs:{"aria-hidden":"true"},key:5},[i("use",{attrs:{"xlink:href":Object(a.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:6},[])])]),i("div",{classMap:{"slds-media__body":!0},key:7},[i("h2",{classMap:{"slds-p-left_small":!0,"slds-text-heading--small":!0,"slds-wrap":!0},key:8},[d(e.header),c("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a species to see a list of sightings for that species."},key:9},[])])])])]),i("div",{classMap:{"slds-card__body":!0},key:10},[i("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:11},[i("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:12},[i("thead",{key:13},[i("tr",{classMap:{"slds-text-heading--label":!0},key:14},[i("th",{attrs:{scope:"col"},key:15},[i("span",{classMap:{"slds-truncate":!0},key:16},[r("Species")])]),i("th",{attrs:{scope:"col"},key:17},[i("span",{classMap:{"slds-truncate":!0},key:18},[r("Location")])])])]),i("tbody",{key:19},g(e.sightingList,(function(s){return i("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:o(20,s.id),on:{click:p||(l._m0=h(e.handleSightingClick))}},[i("td",{classMap:{"slds-cell-wrap":!0},key:21},[d(s.name)]),i("td",{classMap:{"slds-cell-wrap":!0},key:22},[d(s.locations)])])})))])])])])]):null]}var c=Object(a.registerTemplate)(d);d.stylesheets=[],i&&d.stylesheets.push.apply(d.stylesheets,i),d.stylesheetTokens={hostAttribute:"my-my-sightings_sightings-host",shadowAttribute:"my-my-sightings_sightings"};class r extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.header=void 0}get sightingList(){let s=[];return new Set(this.sightings.map(s=>s.comName)).forEach(e=>{let t=this.sightings.filter(s=>s.comName===e),a=new Set(t.map(s=>s.subnational2Name));s.push({id:t[0].speciesCode,name:e,locations:Array.from(a).join(", ")})}),s.sort((s,e)=>s.name>e.name?1:-1)}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.filter(s=>s.speciesCode===e);this.dispatchEvent(new CustomEvent("sightingselected",{detail:t}))}}Object(a.registerDecorators)(r,{publicProps:{sightings:{config:0},header:{config:0}}});var o=Object(a.registerComponent)(r,{tmpl:c});var h=[function(s,e,t){return[".slds-card__footer",e,"{height:250px}"].join("")}];function g(s,e,t,a){const{d:l,h:i,c:d,t:c,k:r,b:o,i:h}=s,{_m0:g}=a;return[e.showSightings?i("article",{classMap:{"slds-card":!0},key:0},[i("div",{classMap:{"slds-card__header":!0,"slds-grid":!0},key:1},[i("header",{classMap:{"slds-media":!0,"slds-media_center":!0,"slds-has-flexi-truncate":!0},key:2},[i("div",{classMap:{"slds-media__body":!0},key:3},[i("h2",{classMap:{"slds-card__header-title":!0},key:4},[i("a",{classMap:{"slds-card__header-link":!0,"slds-truncate":!0},attrs:{href:"#",title:"Accounts"},key:5},[i("span",{key:6},[l(e.header)])]),d("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a sighting to see a map for the siting."},key:7},[])])])])]),i("div",{classMap:{"slds-card__body":!0,"slds-card__body_inner":!0},key:8},[i("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:9},[i("thead",{key:10},[i("tr",{classMap:{"slds-text-heading--label":!0},key:11},[i("th",{attrs:{scope:"col"},key:12},[i("span",{classMap:{"slds-truncate":!0},key:13},[c("Date/Time")])]),i("th",{styleMap:{width:"20rem"},attrs:{scope:"col"},key:14},[i("span",{classMap:{"slds-truncate":!0},key:15},[c("Site Name")])]),i("th",{attrs:{scope:"col"},key:16},[i("span",{classMap:{"slds-truncate":!0},key:17},[c("Location")])]),i("th",{attrs:{scope:"col"},key:18},[i("span",{classMap:{"slds-truncate":!0},key:19},[c("Sighted By")])]),i("th",{attrs:{scope:"col"},key:20},[i("span",{classMap:{"slds-truncate":!0},key:21},[c("Quanitity")])])])]),i("tbody",{key:22},h(e.sightingList,(function(s){return i("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:r(23,s.id),on:{click:g||(a._m0=o(e.handleSightingClick))}},[i("td",{classMap:{"slds-cell-wrap":!0},key:24},[l(s.date)]),i("td",{classMap:{"slds-cell-wrap":!0},key:25},[l(s.location)]),i("td",{classMap:{"slds-cell-wrap":!0},key:26},[l(s.locality)]),i("td",{classMap:{"slds-cell-wrap":!0},key:27},[l(s.by)]),i("td",{classMap:{"slds-cell-wrap":!0},key:28},[l(s.quantity)])])})))])]),i("footer",{classMap:{"slds-card__footer":!0},key:29},[e.showMap?i("iframe",{styleMap:{border:"0"},attrs:{width:"100%",height:"100%",frameborder:"0",src:e.mapUrl,allowfullscreen:""},key:30},[]):null])]):null]}var p=Object(a.registerTemplate)(g);g.stylesheets=[],h&&g.stylesheets.push.apply(g.stylesheets,h),g.stylesheetTokens={hostAttribute:"my-my-sightingsDetails_sightingsDetails-host",shadowAttribute:"my-my-sightingsDetails_sightingsDetails"};class y extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.lat=void 0,this.lon=void 0}get showSightings(){return void 0!==this.sightings&&this.sightings.length>0}get header(){return`${this.sightings[0].comName} (${this.sightings[0].sciName})`}get sightingList(){let s=[];return this.sightings.forEach(e=>{s.findIndex(s=>s.id===e.obsId)<0&&s.push({id:e.obsId,location:e.locName,locality:`${e.subnational2Name}, ${e.subnational1Name}`,quantity:e.howMany,by:e.userDisplayName,date:e.obsDt})}),s}get mapUrl(){return`https://www.google.com/maps/embed/v1/place?key=AIzaSyCB3Q5szLx_1-UE-WIkFSgA3fFi7-KWFAM&q=${this.lat},${this.lon}&zoom=15`}get showMap(){return this.lat&&this.lon}handleSightingClick(s){const e=s.currentTarget.dataset.id,t=this.sightings.find(s=>s.obsId===e);this.lat=t.lat,this.lon=t.lng}}Object(a.registerDecorators)(y,{publicProps:{sightings:{config:0},lat:{config:0},lon:{config:0}}});var u=Object(a.registerComponent)(y,{tmpl:p});function k(s,e,t,a){const{gid:l,b:i,h:n,t:d,c:c}=s,{_m0:r,_m1:h,_m2:g,_m3:p,_m4:y}=a;return[n("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-gutters":!0,"slds-p-left_medium":!0,"slds-p-right_medium":!0,main:!0,"slds-p-bottom_xx-large":!0,"slds-p-top_medium":!0},key:0},[n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0,"slds-text-align_center":!0,"slds-p-bottom_small":!0},key:1},[n("fieldset",{classMap:{"slds-form-element":!0},key:2},[n("div",{classMap:{"slds-form-element__control":!0},key:3},[n("div",{classMap:{"slds-radio_button-group":!0},key:4},[n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:5},[n("input",{classMap:{nearby:!0},attrs:{type:"radio",name:"sightings",id:l("nearby"),disabled:""},props:{value:"nearby",checked:e.nearbySelected},key:6,on:{change:r||(a._m0=i(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+l("nearby")},key:7},[n("span",{classMap:{"slds-radio_faux":!0},key:8},[d("Nearby")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:9},[n("input",{classMap:{local:!0},attrs:{type:"radio",name:"sightings",id:l("local")},props:{value:"local",checked:e.localSelected},key:10,on:{change:h||(a._m1=i(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+l("local")},key:11},[n("span",{classMap:{"slds-radio_faux":!0},key:12},[d("Local")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:13},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"sightings",id:l("state")},props:{value:"state",checked:e.stateSelected},key:14,on:{change:g||(a._m2=i(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+l("state")},key:15},[n("span",{classMap:{"slds-radio_faux":!0},key:16},[d("State")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:17},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"custom",id:l("custom"),disabled:""},props:{value:"cutom",checked:e.customSelected},key:18,on:{change:p||(a._m3=i(e.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+l("custom")},key:19},[n("span",{classMap:{"slds-radio_faux":!0},key:20},[d("Custom")])])])])])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:21},[]),n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0},key:22},[n("div",{key:23},[]),n("div",{key:24},[c("my-sightings",o,{props:{sightings:e.sightings,header:e.sightingsHeader},key:25,on:{sightingselected:y||(a._m4=i(e.handleSightingsSelected))}},[])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:26},[c("my-sightings-details",u,{props:{sightings:e.selectedSightings},key:27},[])])])]}var m=Object(a.registerTemplate)(k);k.stylesheets=[],l&&k.stylesheets.push.apply(k.stylesheets,l),k.stylesheetTokens={hostAttribute:"my-my-resources_resources-host",shadowAttribute:"my-my-resources_resources"};var b=t(1);class _ extends a.LightningElement{constructor(...s){super(...s),this.localSightings=void 0,this.localSightingsDaysBack=3,this.stateSightings=void 0,this.vaSightingsDaysBack=1,this.selectedSightings=[],this.nearbySelected=!1,this.localSelected=!0,this.stateSelected=!1,this.customSelected=!1,this.view="local"}connectedCallback(){this.getLocalSightings(),this.getVirginiaNotableSightings()}get localSightingsHeader(){return`Notable Fredericksburg Region Sightings for the past ${this.localSightingsDaysBack} days`}getLocalSightings(){const s={lat:38.31,long:-77.46,daysBack:this.localSightingsDaysBack};Object(b.c)(s).then(s=>{this.localSightings=s})}getVirginiaNotableSightings(){const s={regionCode:"US-VA",daysBack:this.vaSightingsDaysBack};Object(b.d)(s).then(s=>{this.stateSightings=s})}get stateSightingsHeader(){return"Notable Virginia Sightings for the past day"}handleSightingsSelected(s){this.selectedSightings=s.detail;const e=this.template.querySelector("my-sightings-details");e.lat=void 0,e.lon=void 0}handleSightingsChange(s){this.view=s.target.value,this.selectedSightings=void 0,["nearby","local","state"].forEach(s=>{this[s+"Selected"]=!1}),this[this.view+"Selected"]=s.target.checked}get sightings(){return this[this.view+"Sightings"]}get sightingsHeader(){return this[this.view+"SightingsHeader"]}}Object(a.registerDecorators)(_,{fields:["localSightings","localSightingsDaysBack","stateSightings","vaSightingsDaysBack","selectedSightings","nearbySelected","localSelected","stateSelected","customSelected","view"]});e.default=Object(a.registerComponent)(_,{tmpl:m})}}]);