(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{20:function(s,t,e){"use strict";var a=e(1),i=e(3),l=e.n(i),n=e(7);function o(s,t,e,a){const{c:i,d:l,h:o}=s;return[o("div",{classMap:{"slds-form-element__icon":!0},key:0},[o("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{type:"button"},key:1},[i("lightning-primitive-icon",n.a,{props:{svgClass:t.computedSvgClass,iconName:t.iconName,variant:"bare"},key:2},[]),o("span",{classMap:{"slds-assistive-text":!0},key:3},[l(t.alternativeText)])])])]}var r=Object(a.registerTemplate)(o);o.stylesheets=[],l.a&&o.stylesheets.push.apply(o.stylesheets,l.a),o.stylesheetTokens={hostAttribute:"my-src-lightning_helptext-host",shadowAttribute:"my-src-lightning_helptext"};var c=e(9),d=e(0),h=e(4),g=e(12);class p extends a.LightningElement{constructor(...s){super(...s),this.state={iconName:"utility:info",iconVariant:"bare",alternativeText:"Help"},this._tooltip=null}get content(){return this._tooltip?this._tooltip.value:void 0}set content(s){this._tooltip?this._tooltip.value=s:s&&(this._tooltip=new g.a(s,{root:this,target:()=>this.template.querySelector("button"),type:g.b.Toggle}),this._tooltip.initialize())}set iconName(s){this.state.iconName=s}get iconName(){return Object(c.d)(this.state.iconName)?this.state.iconName:"utility:info"}set iconVariant(s){this.state.iconVariant=s}get iconVariant(){return Object(d.y)(this.state.iconVariant,{fallbackValue:"bare",validValues:["bare","error","inverse","warning"]})}get alternativeText(){return this.state.alternativeText}set alternativeText(s){s&&"string"==typeof s&&""!==s.trim()?this.state.alternativeText=s:console.warn("<lightning-helptext> Invalid alternativeText value: "+s)}disconnectedCallback(){this._tooltip&&!this._tooltip.initialized&&this._tooltip.hide(),this._tooltip=null}renderedCallback(){this._tooltip&&!this._tooltip.initialized&&this._tooltip.initialize()}get computedSvgClass(){const s=Object(h.a)("slds-button__icon");switch(this.iconVariant){case"error":s.add("slds-icon-text-error");break;case"warning":s.add("slds-icon-text-warning");break;case"inverse":case"bare":break;default:s.add("slds-icon-text-default")}return s.toString()}}Object(a.registerDecorators)(p,{publicProps:{content:{config:3},iconName:{config:3},iconVariant:{config:3},alternativeText:{config:3}},track:{state:1},fields:["_tooltip"]});t.a=Object(a.registerComponent)(p,{tmpl:r})},45:function(s,t,e){"use strict";e.r(t);var a=e(1),i=[];var l=[function(s,t,e){return["table",t,"{table-layout:fixed;width:100%}"].join("")}],n=e(20);function o(s,t,e,i){const{h:l,d:o,c:r,t:c,k:d,b:h,i:g}=s,{_m0:p,_m1:y}=i;return[t.sightings?l("div",{classMap:{"slds-size_1-of-1":!0},key:0},[l("div",{classMap:{"slds-card":!0},key:1},[l("div",{classMap:{"slds-card__header":!0},key:2},[l("div",{classMap:{"slds-media":!0,"slds-media--center":!0,"slds-has-flexi-truncate":!0},key:3},[l("span",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},attrs:{title:"Description of icon when needed"},key:4},[l("svg",{classMap:{"slds-icon":!0},attrs:{"aria-hidden":"true"},key:5},[l("use",{attrs:{"xlink:href":Object(a.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:6},[])])]),l("div",{classMap:{"slds-media__body":!0},key:7},[l("h2",{classMap:{"slds-p-left_small":!0,"slds-text-heading--small":!0,"slds-wrap":!0},key:8},[o(t.header),r("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a species to see a list of sightings for that species."},key:9},[])])])])]),l("div",{classMap:{"slds-card__body":!0},key:10},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:11},[t.showLocations?l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:12},[l("thead",{key:13},[l("tr",{classMap:{"slds-text-heading--label":!0},key:14},[l("th",{attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[c("Species")])]),l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[c("Location")])])])]),l("tbody",{key:19},g(t.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:d(20,s.id),on:{click:p||(i._m0=h(t.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:21},[o(s.name)]),l("td",{classMap:{"slds-cell-wrap":!0},key:22},[o(s.locations)])])})))]):null,t.showLocations?null:l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:23},[l("thead",{key:24},[l("tr",{classMap:{"slds-text-heading--label":!0},key:25},[l("th",{attrs:{scope:"col"},key:26},[l("span",{classMap:{"slds-truncate":!0},key:27},[c("Species")])]),l("th",{attrs:{scope:"col"},key:28},[l("span",{classMap:{"slds-truncate":!0},key:29},[c("Scientific Name")])])])]),l("tbody",{key:30},g(t.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:d(31,s.id),on:{click:y||(i._m1=h(t.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:32},[o(s.name)]),l("td",{classMap:{"slds-cell-wrap":!0},key:33},[l("i",{key:34},[o(s.scientific)])])])})))])])])])]):null]}var r=Object(a.registerTemplate)(o);o.stylesheets=[],l&&o.stylesheets.push.apply(o.stylesheets,l),o.stylesheetTokens={hostAttribute:"my-my-sightings_sightings-host",shadowAttribute:"my-my-sightings_sightings"};class c extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.header=void 0,this.viewtype=void 0}get sightingList(){if(0===this.sightings.length)return[{id:"0",name:"None"}];let s=[];return new Set(this.sightings.map(s=>s.comName)).forEach(t=>{let e=this.sightings.filter(s=>s.comName===t),a=new Set(e.map(s=>s.subnational2Name));s.push({id:e[0].speciesCode,name:t,locations:Array.from(a).join(", "),mostRecent:Math.max(...e.map(s=>new Date(s.obsDt))),scientific:e[0].sciName})}),s.sort((s,t)=>s.name>t.name?1:-1)}handleSightingClick(s){const t=s.currentTarget.dataset.id,e=this.sightings.filter(s=>s.speciesCode===t);this.dispatchEvent(new CustomEvent("sightingselected",{detail:e}))}get showLocations(){return"nearby"!==this.viewtype}}Object(a.registerDecorators)(c,{publicProps:{sightings:{config:0},header:{config:0},viewtype:{config:0}}});var d=Object(a.registerComponent)(c,{tmpl:r});var h=[function(s,t,e){return[".slds-card__footer",t,"{height:250px}"].join("")}];function g(s,t,e,a){const{d:i,h:l,c:o,t:r,k:c,b:d,i:h}=s,{_m0:g}=a;return[t.showSightings?l("article",{classMap:{"slds-card":!0},key:0},[l("div",{classMap:{"slds-card__header":!0,"slds-grid":!0},key:1},[l("header",{classMap:{"slds-media":!0,"slds-media_center":!0,"slds-has-flexi-truncate":!0},key:2},[l("div",{classMap:{"slds-media__body":!0},key:3},[l("h2",{classMap:{"slds-card__header-title":!0},key:4},[l("a",{classMap:{"slds-card__header-link":!0,"slds-truncate":!0},attrs:{href:"#",title:"Accounts"},key:5},[l("span",{key:6},[i(t.header)])]),o("lightning-helptext",n.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a sighting to see a map for the siting."},key:7},[])])])])]),l("div",{classMap:{"slds-card__body":!0,"slds-card__body_inner":!0},key:8},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:9},[l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:10},[l("thead",{key:11},[l("tr",{classMap:{"slds-text-heading--label":!0},key:12},[l("th",{attrs:{scope:"col"},key:13},[l("span",{classMap:{"slds-truncate":!0},key:14},[r("Date/Time")])]),l("th",{styleMap:{width:"20rem"},attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[r("Site Name")])]),t.showLocations?l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[r("Location")])]):null,t.showLocations?l("th",{attrs:{scope:"col"},key:19},[l("span",{classMap:{"slds-truncate":!0},key:20},[r("Sighted By")])]):null,l("th",{attrs:{scope:"col"},key:21},[l("span",{classMap:{"slds-truncate":!0},key:22},[r("Quanitity")])])])]),l("tbody",{key:23},h(t.sightingList,(function(s){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":s.id},key:c(24,s.id),on:{click:g||(a._m0=d(t.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:25},[i(s.date)]),l("td",{classMap:{"slds-cell-wrap":!0},key:26},[i(s.location)]),t.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:27},[i(s.locality)]):null,t.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:28},[i(s.by)]):null,l("td",{classMap:{"slds-cell-wrap":!0},key:29},[i(s.quantity)])])})))])])]),l("footer",{classMap:{"slds-card__footer":!0},key:30},[t.showMap?l("iframe",{styleMap:{border:"0"},attrs:{width:"100%",height:"100%",frameborder:"0",src:t.mapUrl,allowfullscreen:""},key:31},[]):null])]):null]}var p=Object(a.registerTemplate)(g);g.stylesheets=[],h&&g.stylesheets.push.apply(g.stylesheets,h),g.stylesheetTokens={hostAttribute:"my-my-sightingsDetails_sightingsDetails-host",shadowAttribute:"my-my-sightingsDetails_sightingsDetails"};class y extends a.LightningElement{constructor(...s){super(...s),this.sightings=void 0,this.lat=void 0,this.lon=void 0,this.viewtype=void 0}get showSightings(){return void 0!==this.sightings&&this.sightings.length>0}get header(){return`${this.sightings[0].comName} (${this.sightings[0].sciName})`}get sightingList(){let s=[];return this.sightings.forEach(t=>{s.findIndex(s=>s.id===t.obsId)<0&&s.push({id:t.obsId,location:t.locName,locality:void 0===t.subnational2Name?"":`${t.subnational2Name}, ${t.subnational1Name}`,quantity:t.howMany,by:t.userDisplayName,date:t.obsDt})}),s}get mapUrl(){return`https://www.google.com/maps/embed/v1/place?key=AIzaSyCB3Q5szLx_1-UE-WIkFSgA3fFi7-KWFAM&q=${this.lat},${this.lon}&zoom=15`}get showMap(){return this.lat&&this.lon}handleSightingClick(s){const t=s.currentTarget.dataset.id,e=this.sightings.find(s=>s.obsId===t);this.lat=e.lat,this.lon=e.lng}get showLocations(){return"nearby"!==this.viewtype}}Object(a.registerDecorators)(y,{publicProps:{sightings:{config:0},lat:{config:0},lon:{config:0},viewtype:{config:0}}});var u=Object(a.registerComponent)(y,{tmpl:p});function b(s,t,e,a){const{gid:i,b:l,h:n,t:o,c:r}=s,{_m0:c,_m1:h,_m2:g,_m3:p,_m4:y}=a;return[n("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-gutters":!0,"slds-p-left_medium":!0,"slds-p-right_medium":!0,main:!0,"slds-p-bottom_xx-large":!0,"slds-p-top_medium":!0},key:0},[n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0,"slds-text-align_center":!0,"slds-p-bottom_small":!0},key:1},[n("fieldset",{classMap:{"slds-form-element":!0},key:2},[n("div",{classMap:{"slds-form-element__control":!0},key:3},[n("div",{classMap:{"slds-radio_button-group":!0},key:4},[n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:5},[n("input",{classMap:{nearby:!0},attrs:{type:"radio",name:"sightings",id:i("nearby"),disabled:t.nearbyDisabled?"":null},props:{value:"nearby",checked:t.nearbySelected},key:6,on:{change:c||(a._m0=l(t.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("nearby")},key:7},[n("span",{classMap:{"slds-radio_faux":!0},key:8},[o("Nearby")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:9},[n("input",{classMap:{local:!0},attrs:{type:"radio",name:"sightings",id:i("local")},props:{value:"local",checked:t.localSelected},key:10,on:{change:h||(a._m1=l(t.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("local")},key:11},[n("span",{classMap:{"slds-radio_faux":!0},key:12},[o("Local")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:13},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"sightings",id:i("state")},props:{value:"state",checked:t.stateSelected},key:14,on:{change:g||(a._m2=l(t.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("state")},key:15},[n("span",{classMap:{"slds-radio_faux":!0},key:16},[o("State")])])]),n("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:17},[n("input",{classMap:{state:!0},attrs:{type:"radio",name:"custom",id:i("custom"),disabled:""},props:{value:"cutom",checked:t.customSelected},key:18,on:{change:p||(a._m3=l(t.handleSightingsChange))}},[]),n("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:""+i("custom")},key:19},[n("span",{classMap:{"slds-radio_faux":!0},key:20},[o("Custom")])])])])])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:21},[]),n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0},key:22},[n("div",{key:23},[]),n("div",{key:24},[r("my-sightings",d,{props:{sightings:t.sightings,header:t.sightingsHeader,viewtype:t.view},key:25,on:{sightingselected:y||(a._m4=l(t.handleSightingsSelected))}},[])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0},key:26},[r("my-sightings-details",u,{props:{sightings:t.selectedSightings,viewtype:t.view},key:27},[])])])]}var m=Object(a.registerTemplate)(b);b.stylesheets=[],i&&b.stylesheets.push.apply(b.stylesheets,i),b.stylesheetTokens={hostAttribute:"my-my-resources_resources-host",shadowAttribute:"my-my-resources_resources"};var k=e(14);class _ extends a.LightningElement{constructor(...s){super(...s),this.localSightings=void 0,this.localSightingsDaysBack=3,this.stateSightings=void 0,this.nearbySightings=void 0,this.vaSightingsDaysBack=1,this.selectedSightings=[],this.nearbySelected=!1,this.localSelected=!0,this.stateSelected=!1,this.customSelected=!1,this.view="local"}connectedCallback(){this.getLocalSightings(),this.getVirginiaNotableSightings(),navigator.geolocation&&this.getNearbyObservations()}get localSightingsHeader(){return`Notable Fredericksburg Region Sightings for the past ${this.localSightingsDaysBack} days`}getLocalSightings(){const s={lat:38.31,long:-77.46,daysBack:this.localSightingsDaysBack};Object(k.c)(s).then(s=>{this.localSightings=s})}getVirginiaNotableSightings(){const s={regionCode:"US-VA",daysBack:this.vaSightingsDaysBack};Object(k.e)(s).then(s=>{this.stateSightings=s})}getNearbyObservations(){navigator.geolocation.getCurrentPosition(s=>{const t={lat:s.coords.latitude,long:s.coords.longitude};Object(k.d)(t).then(s=>{this.nearbySightings=s})})}get stateSightingsHeader(){return"Notable Virginia Sightings for the past day"}get nearbySightingsHeader(){return"Nearby Sightings for the past 7 days"}handleSightingsSelected(s){this.selectedSightings=s.detail;const t=this.template.querySelector("my-sightings-details");t.lat=void 0,t.lon=void 0}handleSightingsChange(s){this.view=s.target.value,this.selectedSightings=void 0,["nearby","local","state"].forEach(s=>{this[s+"Selected"]=!1}),this[this.view+"Selected"]=s.target.checked}get sightings(){return this[this.view+"Sightings"]}get sightingsHeader(){return this[this.view+"SightingsHeader"]}get nearbyDisabled(){return!navigator.geolocation}}Object(a.registerDecorators)(_,{fields:["localSightings","localSightingsDaysBack","stateSightings","nearbySightings","vaSightingsDaysBack","selectedSightings","nearbySelected","localSelected","stateSelected","customSelected","view"]});t.default=Object(a.registerComponent)(_,{tmpl:m})}}]);